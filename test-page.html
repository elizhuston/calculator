<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<body>
  <div id="div" class="">
    <table>
      <tr>
        <td>
          <div   boardIdx="0"></div>
          <div boardIdx="1" ></div>
          <div boardIdx="2"> </div>
        </td>
      </tr>
      <tr>
        <td>
          <div boardIdx="3" ></div>
          <div boardIdx="4" ></div>
          <div boardIdx="5" ></div>
        </td>
      </tr>
      <tr>
        <td>
          <div boardIdx="6" ></div>
          <div boardIdx="7" ></div>
          <div boardIdx="8" ></div>
        </td>
      </tr>
    </table>
  </div>

  <div id="msg_div" class="">

  </div>

  <style>
  tr div {
    border: 3px solid black;
    width: 50px;
    height: 50px;
    float: left;
  }
  </style>

  <script>

  var div_text = document.getElementById('div');
  var msgDiv = document.getElementById('msg_div');

  var board=["","","","","","","","",""];
  var turn="X";

  div_text.addEventListener('click', function(evt) {
    if (evt.target.tagName === 'DIV') {
      var idx = evt.target.getAttribute('boardIdx');
      if (board[idx] === "") {
        board[idx]=turn;
        evt.target.innerHTML=turn;
        if (turn==="X") {
          turn="O";
        } else {
          turn="X";
        }
        isWin();
      }
      else {
        msgDiv.innerHTML = 'That block is already taken. Try another bock.';
      }

      console.log(idx);

    }
  });


  function isWin(){
    if ( (board[0] !== "" && board[0]=== board[1] && board[1] === board[2])
    ||   (board[0] !== "" && board[0]=== board[3] && board[3] === board[6])
    ||   (board[0] !== "" && board[0]=== board[4] && board[4] === board[8])
    ||   (board[1] !== "" && board[1]=== board[4] && board[4] === board[7])
    ||   (board[2] !== "" && board[2]=== board[5] && board[5] === board[8])
    ||   (board[6] !== "" && board[6]=== board[4] && board[4] === board[2])
    ||   (board[6] !== "" && board[6]=== board[7] && board[7] === board[8])
    ||   (board[3] !== "" && board[3]=== board[4] && board[4] === board[5])
  ){
    msgDiv.innerHTML =' Winner.';
  }
  else {
    var newAr=[];
    for (i=0;i < board.length;i++){
      if (board[i] !== ""){
        newAr.push(board[i]);
      }
    }
    if (newAr.length===9){
      msgDiv.innerHTML ='Tie.';
    }
  }
}

</script>

</body>
</html>
